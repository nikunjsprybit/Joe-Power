var removed_person_types=[];jQuery(document).ready(function($){$('.page_collapsible').collapsible({defaultOpen:'wcfm_products_manage_form_general_head',speed:'slow',loadOpen:function(elem){elem.next().show();},loadClose:function(elem,opts){elem.next().hide();}});$('.page_collapsible').collapsible('closeAll');$('.page_collapsible:first').collapsible('open');$("#product_cats").select2({placeholder:"Choose ..."});$('.product_taxonomies').each(function(){$("#"+$(this).attr('id')).select2({placeholder:"Choose "+$(this).attr('id')+" ..."});});$("#upsell_ids").select2({placeholder:"Choose ..."});$("#crosssell_ids").select2({placeholder:"Choose ..."});$("#grouped_products").select2({placeholder:"Choose ..."});$('.variations').click(function(){if($(this).hasClass('collapse-open')){resetVariationsAttributes();}});function addVariationManageStockProperty(){$('.variation_manage_stock_ele').each(function(){$(this).off('change').on('change',function(){if($(this).is(':checked')){$(this).parent().find('.variation_non_manage_stock_ele').removeClass('non_stock_ele_hide');}else{$(this).parent().find('.variation_non_manage_stock_ele').addClass('non_stock_ele_hide');}}).change();});$('.variation_is_virtual_ele').each(function(){$(this).off('change').on('change',function(){if($(this).is(':checked')){$(this).parent().find('.variation_non_virtual_ele').addClass('non_virtual_ele_hide');}else{$(this).parent().find('.variation_non_virtual_ele').removeClass('non_virtual_ele_hide');}}).change();});$('.variation_is_downloadable_ele').each(function(){$(this).off('change').on('change',function(){if($(this).is(':checked')){$(this).parent().find('.variation_downloadable_ele').removeClass('downloadable_ele_hide');$(this).parent().find('.variation_downloadable_ele').next('.upload_button').removeClass('downloadable_ele_hide');}else{$(this).parent().find('.variation_downloadable_ele').addClass('downloadable_ele_hide');$(this).parent().find('.variation_downloadable_ele').next('.upload_button').addClass('downloadable_ele_hide');}}).change();});}
addVariationManageStockProperty();$('.manage_stock_ele').change(function(){if($(this).is(':checked')){$(this).parent().find('.non_manage_stock_ele').removeClass('non_stock_ele_hide');}else{$(this).parent().find('.non_manage_stock_ele').addClass('non_stock_ele_hide');}}).change();$('.variation_manage_stock').change(function(){if($(this).is(':checked')){$(this).parent().find('.variation_non_manage_stock').removeClass('non_stock_ele_hide');}else{$(this).parent().find('.variation_non_manage_stock').addClass('non_stock_ele_hide');}}).change();if($('#product_type').length>0){var pro_types=["simple","variable","grouped","external","booking"];$('#product_type').change(function(){var product_type=$(this).val();$('#wcfm_products_manage_form .page_collapsible').addClass('wcfm_head_hide');$('#wcfm_products_manage_form .wcfm-container').addClass('wcfm_block_hide');$('.wcfm_ele').addClass('wcfm_ele_hide');$('.'+product_type).removeClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');if($.inArray(product_type,pro_types)==-1){$('.simple').removeClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');$('.non-'+product_type).addClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');product_type='simple';}
if(product_type!='simple'){$('#is_downloadable').attr('checked',false);$('#is_virtual').attr('checked',false);}
$('#is_downloadable').change();$('#is_virtual').change();}).change();$('#is_downloadable').change(function(){if($(this).is(':checked')){$('.downlodable').removeClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');}else{$('.downlodable').addClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');}}).change();$('.is_downloadable_hidden').change(function(){if($(this).val()=='enable'){$('.downlodable').removeClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');}else{$('.downlodable').addClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');}}).change();if($('#is_downloadable').length==0)$('.downlodable').addClass('downloadable_ele_hide');$('#is_virtual').change(function(){if($(this).is(':checked')){$('.nonvirtual').addClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');}else{$('.nonvirtual').removeClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');}}).change();$('.is_virtual_hidden').change(function(){if($(this).val()=='enable'){$('.nonvirtual').addClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');}else{$('.nonvirtual').removeClass('wcfm_ele_hide wcfm_block_hide wcfm_head_hide');}}).change();}else{$('#wcfm_products_manage_form .page_collapsible').addClass('wcfm_head_hide');$('#wcfm_products_manage_form .wcfm-container').addClass('wcfm_block_hide');$('.wcfm_ele').addClass('wcfm_ele_hide');}
$('.wcfm_datepicker').each(function(){$(this).datepicker({dateFormat:$(this).data('date_format'),changeMonth:true,changeYear:true});});$("#sale_date_from").datepicker({changeMonth:true,changeYear:true,dateFormat:'yy-mm-dd',onClose:function(selectedDate){$("#sale_date_upto").datepicker("option","minDate",selectedDate);}});$("#sale_date_upto").datepicker({changeMonth:true,changeYear:true,dateFormat:'yy-mm-dd',onClose:function(selectedDate){$("#sale_date_from").datepicker("option","maxDate",selectedDate);}});$('.multi_input_holder').each(function(){var multi_input_holder=$(this);addMultiInputProperty(multi_input_holder);});function addMultiInputProperty(multi_input_holder){if(multi_input_holder.children('.multi_input_block').length==1)multi_input_holder.children('.multi_input_block').children('.remove_multi_input_block').css('display','none');multi_input_holder.children('.multi_input_block').each(function(){if($(this)[0]!=multi_input_holder.children('.multi_input_block:last')[0]){$(this).children('.add_multi_input_block').remove();}});multi_input_holder.children('.multi_input_block').children('.add_multi_input_block').off('click').on('click',function(){var holder_id=multi_input_holder.attr('id');var holder_name=multi_input_holder.data('name');var multi_input_blockCount=multi_input_holder.data('length');multi_input_blockCount++;var multi_input_blockEle=multi_input_holder.children('.multi_input_block:first').clone(false);multi_input_blockEle.find('textarea,input:not(input[type=button],input[type=submit],input[type=checkbox],input[type=radio])').val('');multi_input_blockEle.find('input[type=checkbox]').attr('checked',false);multi_input_blockEle.children('.wcfm-wp-fields-uploader,.multi_input_block_element:not(.multi_input_holder)').each(function(){var ele=$(this);var ele_name=ele.data('name');if(ele.hasClass('wcfm-wp-fields-uploader')){var uploadEle=ele;ele_name=uploadEle.find('.multi_input_block_element').data('name');uploadEle.find('img').attr('src','').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount+'_display').addClass('placeHolder');uploadEle.find('.multi_input_block_element').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount).attr('name',holder_name+'['+multi_input_blockCount+']['+ele_name+']');uploadEle.find('.upload_button').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount+'_button').show();uploadEle.find('.remove_button').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount+'_remove_button').hide();addWCFMUploaderProperty(uploadEle);}else{ele.attr('name',holder_name+'['+multi_input_blockCount+']['+ele_name+']');ele.attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount);}
if(ele.hasClass('wcfm_datepicker')){ele.removeClass('hasDatepicker').datepicker({dateFormat:ele.data('date_format'),changeMonth:true,changeYear:true});}else if(ele.hasClass('time_picker')){$('.time_picker').timepicker('remove').timepicker({'step':15});ele.timepicker('remove').timepicker({'step':15});}});multi_input_blockEle.children('.multi_input_holder').each(function(){setNestedMultiInputIndex($(this),holder_id,holder_name,multi_input_blockCount);});multi_input_blockEle.children('.remove_multi_input_block').off('click').on('click',function(){var remove_ele_parent=$(this).parent().parent();var addEle=remove_ele_parent.children('.multi_input_block').children('.add_multi_input_block').clone(true);$(this).parent().remove();remove_ele_parent.children('.multi_input_block').children('.add_multi_input_block').remove();remove_ele_parent.children('.multi_input_block:last').append(addEle);if(remove_ele_parent.children('.multi_input_block').length==1)remove_ele_parent.children('.multi_input_block').children('.remove_multi_input_block').css('display','none');});multi_input_blockEle.children('.add_multi_input_block').remove();multi_input_holder.append(multi_input_blockEle);multi_input_holder.children('.multi_input_block:last').append($(this));if(multi_input_holder.children('.multi_input_block').length>1)multi_input_holder.children('.multi_input_block').children('.remove_multi_input_block').css('display','block');multi_input_holder.data('length',multi_input_blockCount);addVariationManageStockProperty();});if(!multi_input_holder.hasClass('multi_input_block_element')){multi_input_holder.children('.multi_input_block').css('padding-bottom','40px');}
if(multi_input_holder.children('.multi_input_block').children('.multi_input_holder').length>0){multi_input_holder.children('.multi_input_block').css('padding-bottom','40px');}
multi_input_holder.children('.multi_input_block').children('.remove_multi_input_block').off('click').on('click',function(){var remove_ele_parent=$(this).parent().parent();var addEle=remove_ele_parent.children('.multi_input_block').children('.add_multi_input_block').clone(true);if($(this).parent().find($('input[data-name="is_taxonomy"]').data('name')==1)){$taxonomy=$(this).parent().find($('input[data-name="tax_name"]')).val();$('select.wcfm_attribute_taxonomy').find('option[value="'+$taxonomy+'"]').removeAttr('disabled');}
$(this).parent().remove();remove_ele_parent.children('.multi_input_block').children('.add_multi_input_block').remove();remove_ele_parent.children('.multi_input_block:last').append(addEle);if(remove_ele_parent.children('.multi_input_block').length==1)remove_ele_parent.children('.multi_input_block').children('.remove_multi_input_block').css('display','none');});}
function resetMultiInputIndex(multi_input_holder){var holder_id=multi_input_holder.attr('id');var holder_name=multi_input_holder.data('name');var multi_input_blockCount=0;multi_input_holder.find('.multi_input_block').each(function(){$(this).children('.wcfm-wp-fields-uploader,.multi_input_block_element:not(.multi_input_holder)').each(function(){var ele=$(this);var ele_name=ele.data('name');if(ele.hasClass('wcfm-wp-fields-uploader')){var uploadEle=ele;ele_name=uploadEle.find('.multi_input_block_element').data('name');uploadEle.find('img').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount+'_display').addClass('placeHolder');uploadEle.find('.multi_input_block_element').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount).attr('name',holder_name+'['+multi_input_blockCount+']['+ele_name+']');uploadEle.find('.upload_button').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount+'_button').show();uploadEle.find('.remove_button').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount+'_remove_button').hide();}else{var multiple=ele.attr('multiple');if(typeof multiple!==typeof undefined&&multiple!==false){ele.attr('name',holder_name+'['+multi_input_blockCount+']['+ele_name+'][]');}else{ele.attr('name',holder_name+'['+multi_input_blockCount+']['+ele_name+']');}
ele.attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount);}});multi_input_blockCount++;});}
function setNestedMultiInputIndex(nested_multi_input,holder_id,holder_name,multi_input_blockCount){nested_multi_input.children('.multi_input_block:not(:last)').remove();var multi_input_id=nested_multi_input.attr('id');multi_input_id=multi_input_id.replace(holder_id+'_','');var multi_input_id_splited=multi_input_id.split('_');var multi_input_name='';for(var i=0;i<(multi_input_id_splited.length-1);i++){if(multi_input_name!='')multi_input_name+='_';multi_input_name+=multi_input_id_splited[i];}
nested_multi_input.attr('data-name',holder_name+'['+multi_input_blockCount+']['+multi_input_name+']');nested_multi_input.attr('id',holder_id+'_'+multi_input_name+'_'+multi_input_blockCount);nested_multi_input.children('.multi_input_block').children('.wcfm-wp-fields-uploader,.multi_input_block_element:not(.multi_input_holder)').each(function(){var ele=$(this);var ele_name=ele.data('name');if(ele.hasClass('wcfm-wp-fields-uploader')){var uploadEle=ele;ele_name=uploadEle.find('.multi_input_block_element').data('name');uploadEle.find('img').attr('src','').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount+'_display').addClass('placeHolder');uploadEle.find('.multi_input_block_element').attr('id',holder_id+'_'+multi_input_name+'_'+multi_input_blockCount+'_'+ele_name+'_0').attr('name',holder_name+'['+multi_input_blockCount+']['+multi_input_name+'][0]['+ele_name+']');uploadEle.find('.upload_button').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount+'_button').show();uploadEle.find('.remove_button').attr('id',holder_id+'_'+ele_name+'_'+multi_input_blockCount+'_remove_button').hide();addWCFMUploaderProperty(uploadEle);}else{var multiple=ele.attr('multiple');if(typeof multiple!==typeof undefined&&multiple!==false){ele.attr('name',holder_name+'['+multi_input_blockCount+']['+multi_input_name+'][0]['+ele_name+'][]');}else{ele.attr('name',holder_name+'['+multi_input_blockCount+']['+multi_input_name+'][0]['+ele_name+']');}
ele.attr('id',holder_id+'_'+multi_input_name+'_'+multi_input_blockCount+'_'+ele_name+'_0');}
if(ele.hasClass('wcfm_datepicker')){ele.removeClass('hasDatepicker').datepicker({dateFormat:ele.data('date_format'),changeMonth:true,changeYear:true});}else if(ele.hasClass('time_picker')){$('.time_picker').timepicker('remove').timepicker({'step':15});ele.timepicker('remove').timepicker({'step':15});}});addMultiInputProperty(nested_multi_input);if(nested_multi_input.children('.multi_input_block').children('.multi_input_holder').length>0)nested_multi_input.children('.multi_input_block').css('padding-bottom','40px');nested_multi_input.children('.multi_input_block').children('.multi_input_holder').each(function(){setNestedMultiInputIndex($(this),holder_id+'_'+multi_input_name+'_0',holder_name+'['+multi_input_blockCount+']['+multi_input_name+']',0);});}
$('button.wcfm_add_attribute').on('click',function(){var attribute=$('select.wcfm_attribute_taxonomy').val();if(attribute){var data={action:'wcfmu_generate_taxonomy_attributes',taxonomy:attribute};$('#attributes').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});$.ajax({type:'POST',url:woocommerce_params.ajax_url,data:data,success:function(response){if(response){$response=$(response);$('#attributes').append($response.find('.multi_input_block'));addMultiInputProperty($('#attributes'));resetMultiInputIndex($('#attributes'));$('#product_type').change();$('#attributes').find('.multi_input_block:last').each(function(){$(this).find('input[data-name="is_variation"]').change(function(){resetVariationsAttributes();});});$(document.body).trigger('updated_taxonomy_attribute');}}});}
if(attribute){$('select.wcfm_attribute_taxonomy').find('option[value="'+attribute+'"]').attr('disabled','disabled');$('select.wcfm_attribute_taxonomy').val('');}
$('#attributes').unblock();return false;});if($('#select_attributes').length>0){$('#attributes').append($('#select_attributes').html());$('#select_attributes').remove();addMultiInputProperty($('#attributes'));resetMultiInputIndex($('#attributes'));$('#attributes').find('.multi_input_block').find('select').select2({placeholder:"Search for a attribute ..."});}
$('#attributes').find('.multi_input_block').each(function(){if($(this).find($('input[data-name="is_taxonomy"]').data('name')==1)){$taxonomy=$(this).find('input[data-name="tax_name"]').val();$('select.wcfm_attribute_taxonomy').find('option[value="'+$taxonomy+'"]').attr('disabled','disabled');}});$('#attributes').find('.multi_input_block').each(function(){$(this).find('input[data-name="is_variation"]').change(function(){resetVariationsAttributes();});});function resetVariationsAttributes(){$('#variations').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});var data={action:'wcfm_generate_variation_attributes',wcfm_products_manage_form:$('#wcfm_products_manage_form').serialize()}
$.ajax({type:'POST',url:woocommerce_params.ajax_url,data:data,success:function(response){if(response){$.each($.parseJSON(response),function(attr_name,attr_value){var select_html='<p class="variations_'+attr_name.toLowerCase()+' wcfm_title attribute_ele_new selectbox_title"><strong>'+jsUcfirst(attr_name.replace("pa_",""))+'</strong></p><select name="attribute_'+attr_name.toLowerCase()+'" class="wcfm-select wcfm_ele attribute_ele attribute_ele_new variable multi_input_block_element" data-name="attribute_'+attr_name.toLowerCase()+'"><option value="">Any '+jsUcfirst(attr_name.replace("pa_",""))+' ..</option>';$.each(attr_value,function(k,attr_val){select_html+='<option value="'+k+'">'+attr_val+'</option>';});select_html+='</select>';$('#variations').find('.multi_input_block').each(function(){if($(this).find('select[data-name="attribute_'+attr_name.toLowerCase()+'"]').length>0){$attr_selected_val=$(this).find('select[data-name="attribute_'+attr_name.toLowerCase()+'"]').val();$(this).find('select[data-name="attribute_'+attr_name.toLowerCase()+'"]').replaceWith($(select_html));$(this).find('select[data-name="attribute_'+attr_name.toLowerCase()+'"]').val($attr_selected_val);}else if($(this).find('input[data-name="attribute_'+attr_name.toLowerCase()+'"]').length>0){$attr_selected_val=$(this).find('input[data-name="attribute_'+attr_name.toLowerCase()+'"]').val();$(this).find('input[data-name="attribute_'+attr_name.toLowerCase()+'"]').replaceWith($(select_html));$(this).find('select[data-name="attribute_'+attr_name.toLowerCase()+'"]').val($attr_selected_val);}else{$(this).prepend(select_html);}});});$('.attribute_ele_old').remove();$('.attribute_ele_new').addClass('attribute_ele_old').removeClass('attribute_ele_new');resetMultiInputIndex($('#variations'));$('#variations').unblock();$('#wcfm_products_manage_form .selectbox_title').text('Select Rent and/or sale type');$('select option[value=""]').text('Select Rent and/or sale type');$('select option[value="equipmentprice"]').text('Equipment Price');$('select option[value="rentalrateperday"]').text('Rental Rate/Day');$('select option[value="rentalrateperweek"]').text('Rental Rate/Week');$('select option[value="rentalratepermonth"]').text('Rental Rate/Month');$('#product_parent_cats option[value=""]').text('Choose ...');$('#_wc_booking_calendar_display_mode option[value=""]').text('Choose ...');$('#attributes_is_variation_0').prop('checked',true);}},dataType:'html'});}
resetVariationsAttributes();$('#variations').find('.multi_input_block').each(function(){$multi_input_block=$(this);$attributes=$multi_input_block.find('input[data-name="attributes"]');$attributes_val=$attributes.val();if($attributes_val.length>0){$.each($.parseJSON($attributes_val),function(attr_key,attr_val){$multi_input_block.prepend('<input type="hidden" name="'+attr_key+'" data-name="'+attr_key+'" value="'+attr_val+'" />');});}});var removed_variations=[];$('#variations').find('.remove_multi_input_block').click(function(){removed_variations.push($(this).parent().find('.variation_id').val());});$(document).find(".next_step1").click(function(){var $next_step=jQuery(this).attr('data-nextstep');if(wcfm_products_manage_form_validate_step1()){jQuery('.user_dashboard_panel_guide .nav-tabs a').removeClass('active');jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+$next_step+'"]').trigger('click');jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+$next_step+'"]').addClass('active');jQuery('html, body').animate({'scrollTop':jQuery(".user_dashboard_panel_guide").position().top});}else{return false;}});$(document).find(".next_step2").click(function(){var $next_step=jQuery(this).attr('data-nextstep');if(wcfm_products_manage_form_validate_step2()){jQuery('.user_dashboard_panel_guide .nav-tabs a').removeClass('active');jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+$next_step+'"]').trigger('click');jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+$next_step+'"]').addClass('active');jQuery('html, body').animate({'scrollTop':jQuery(".user_dashboard_panel_guide").position().top});}else{return false;}});$(document).find(".next_step3").click(function(){var $next_step=jQuery(this).attr('data-nextstep');if(wcfm_products_manage_form_validate_step3()){jQuery('.user_dashboard_panel_guide .nav-tabs a').removeClass('active');jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+$next_step+'"]').trigger('click');jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+$next_step+'"]').addClass('active');jQuery('html, body').animate({'scrollTop':jQuery(".user_dashboard_panel_guide").position().top});}else{return false;}});$(document).find(".next_step4").click(function(){var $next_step=jQuery(this).attr('data-nextstep');if(wcfm_products_manage_form_validate_step4()){jQuery('.user_dashboard_panel_guide .nav-tabs a').removeClass('active');jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+$next_step+'"]').trigger('click');jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+$next_step+'"]').addClass('active');jQuery('html, body').animate({'scrollTop':jQuery(".user_dashboard_panel_guide").position().top});}else{return false;}});function remove_navbar_active_class(){$(document).find(".user_dashboard_panel_guide .nav-tabs a").each(function(){if($(this).hasClass('active')){$(this).removeClass('active');}});}
function remove_tab_content_active_class(){$(document).find(".tab-content .tab-pane").each(function(){if($(this).hasClass('active')){$(this).removeClass('active');}});}
$(document).find(".user_dashboard_panel_guide .nav-tabs a").click(function(){var selected_step=jQuery(this).attr('data-step');var stepcount=jQuery(this).attr('data-stepcount');if(stepcount==2){if(wcfm_products_manage_form_validate_step1()){remove_navbar_active_class();jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+selected_step+'"]').addClass('active');jQuery('html, body').animate({'scrollTop':jQuery(".user_dashboard_panel_guide").position().top});}else{return false;}}else if(stepcount==3){if(wcfm_products_manage_form_validate_step2()){remove_navbar_active_class();jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+selected_step+'"]').addClass('active');jQuery('html, body').animate({'scrollTop':jQuery(".user_dashboard_panel_guide").position().top});}else{return false;}}else if(stepcount==4){if(wcfm_products_manage_form_validate_step3()){remove_navbar_active_class();jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+selected_step+'"]').addClass('active');jQuery('html, body').animate({'scrollTop':jQuery(".user_dashboard_panel_guide").position().top});}else{return false;}}else if(stepcount==5){if(wcfm_products_manage_form_validate_step4()&&wcfm_products_manage_form_validate_step1()&&wcfm_products_manage_form_validate_step2()&&wcfm_products_manage_form_validate_step3()){remove_navbar_active_class();jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+selected_step+'"]').addClass('active');if($('.products_manage_availability').hasClass('check_collapsible_open')&&$(this).hasClass('menuLinkedpro')){$('.products_manage_costs').addClass('collapse-open').removeClass('collapse-close');$('.products_manage_costs_fields').show();$('.products_manage_availability').addClass('collapse-open').removeClass('collapse-close').removeClass('check_collapsible_open');$('.products_manage_availability_fildes').show();}
jQuery('html, body').animate({'scrollTop':jQuery(".user_dashboard_panel_guide").position().top});}else{return false;}}else{remove_navbar_active_class();jQuery('.user_dashboard_panel_guide .nav-tabs a[href="#'+selected_step+'"]').addClass('active');jQuery('html, body').animate({'scrollTop':jQuery(".user_dashboard_panel_guide").position().top});}});$('.btnPrevious').click(function(){var prev_step=$(this).data('prevstep');$('.user_dashboard_panel_guide .nav-tabs a[href="#'+prev_step+'"]').trigger('click');if(prev_step=='address'){$('#image').removeClass('active');$('#image').removeClass('in');}});function wcfm_products_manage_form_validate_step1(){$is_valid=true;var product_subcats=$.trim($('#wcfm_products_manage_form').find('#product_subcats').val());var product_parent_cats=$.trim($('#wcfm_products_manage_form').find('#product_parent_cats').val());var description='';if(tinyMCE.activeEditor)
description=tinyMCE.activeEditor.getContent();else
description=$.trim($('#wcfm_products_manage_form').find('#description').val());var title=$.trim($('#wcfm_products_manage_form').find('#title').val());$('#wcfm_products_manage_form .wcfm-message-general').html('').removeClass('wcfm-error');$('#product_subcats').next().find(".select2-selection.select2-selection--multiple").removeClass('valreq')
$('#product_parent_cats').removeClass('valreq')
$('#title').removeClass('valreq')
$('#general1 #wp-description-wrap').removeClass('valreqdes')
if(product_parent_cats.length==0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-general').html('<span class="wcicon-status-cancelled"></span> Please select Category before submit.').addClass('wcfm-error').slideDown();$('#product_parent_cats').addClass('valreq');$('html, body').animate({'scrollTop':$(".valreq").position().top-200});return false;}else if(product_subcats.length==0&&product_parent_cats.length!=0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-general').html('<span class="wcicon-status-cancelled"></span> Please select Subcategory before submit.').addClass('wcfm-error').slideDown();$('#product_subcats').next().find(".select2-selection.select2-selection--multiple").addClass('valreq');$('html, body').animate({'scrollTop':$(".valreq").position().top-200});}
else if(title.length==0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-general').html('<span class="wcicon-status-cancelled"></span>'+wcfm_products_manage_messages.no_title).addClass('wcfm-error').slideDown();$('#title').addClass('valreq');$('html, body').animate({'scrollTop':$(".valreq").position().top-200});}
else if(description.length==0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-general').html('<span class="wcicon-status-cancelled"></span> Please insert description before submit.').addClass('wcfm-error').slideDown();$('#general1 #wp-description-wrap').addClass('valreqdes');$('html, body').animate({'scrollTop':$(".valreqdes").position().top-200});}
return $is_valid;}
function wcfm_products_manage_form_validate_step2(){$is_valid=true;var property_zip=$.trim($('#wcfm_products_manage_form').find('#property_zip').val());var property_county=$.trim($('#wcfm_products_manage_form').find('#property_county').val());$('#wcfm_products_manage_form .wcfm-message-address').html('').removeClass('wcfm-error');$('#property_county').removeClass('valreq');$('#property_zip').removeClass('valreq');if(property_county.length==0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-address').html('<span class="wcicon-status-cancelled"></span> Please insert City name before submit.').addClass('wcfm-error').slideDown();$('#property_county').addClass('valreq');$('html, body').animate({'scrollTop':$(".valreq").position().top-200});}
else if(property_zip.length==0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-address').html('<span class="wcicon-status-cancelled"></span> Please insert Zip Code before submit.').addClass('wcfm-error').slideDown();$('#property_zip').addClass('valreq');$('html, body').animate({'scrollTop':$(".valreq").position().top-200});}
return $is_valid;}
function wcfm_products_manage_form_validate_step3(){$is_valid=true;var featured_img=$('#wcfm_products_manage_form').find("[name^='featuredimages']");$('#wcfm_products_manage_form .wcfm-message-image').html('').removeClass('wcfm-error');$('#wcfm_products_manage_form_gallery_expander .box.has-advanced-upload').removeClass('valreqimg');if(featured_img.length==0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-image').html('<span class="wcicon-status-cancelled"></span> Please select image before submit.').addClass('wcfm-error').slideDown();$('#wcfm_products_manage_form_gallery_expander .box.has-advanced-upload').addClass('valreqimg');$('html, body').animate({'scrollTop':$(".valreqimg").position().top-200});}
return $is_valid;}
function wcfm_products_manage_form_validate_step4(){$is_valid=true;return $is_valid;}
function wcfm_products_manage_form_validate_step5(){$is_valid=true;var _wc_booking_day_cost=$.trim($('#wcfm_products_manage_form').find('#_wc_booking_day_cost').val());var _wc_booking_week_cost=$.trim($('#wcfm_products_manage_form').find('#_wc_booking_week_cost').val());var _wc_booking_month_cost=$.trim($('#wcfm_products_manage_form').find('#_wc_booking_month_cost').val());$('#wcfm_products_manage_form .wcfm-message-linkedpro').html('').removeClass('wcfm-error');$('#wcfm_products_manage_form #_wc_booking_day_cost').removeClass('valreq');$('#wcfm_products_manage_form #_wc_booking_week_cost').removeClass('valreq');$('#wcfm_products_manage_form #_wc_booking_month_cost').removeClass('valreq');if(_wc_booking_day_cost.length==0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-linkedpro').html('<span class="wcicon-status-cancelled"></span> Please add per day price before submit.').addClass('wcfm-error').slideDown();$('#wcfm_products_manage_form #_wc_booking_day_cost').addClass('valreq');$('html, body').animate({'scrollTop':$(".valreq").position().top-200});}else if(_wc_booking_week_cost.length==0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-linkedpro').html('<span class="wcicon-status-cancelled"></span> Please add per week price before submit.').addClass('wcfm-error').slideDown();$('#wcfm_products_manage_form_gallery_expander .box.has-advanced-upload').addClass('valreq');$('html, body').animate({'scrollTop':$(".valreq").position().top-200});}else if(_wc_booking_month_cost.length==0){$is_valid=false;$('#wcfm_products_manage_form .wcfm-message-linkedpro').html('<span class="wcicon-status-cancelled"></span> Please add per month price before submit.').addClass('wcfm-error').slideDown();$('#wcfm_products_manage_form_gallery_expander .box.has-advanced-upload').addClass('valreq');$('html, body').animate({'scrollTop':$(".valreq").position().top-200});}
return $is_valid;}
$('.content_wrapper_dashboard').on('keyup change','.valreq',function(){$(this).css('border-color','#e7e9ef').removeClass('valreq');$('#general1 #wp-description-wrap').css('border-style','none');$('#title').css('border-color','#e7e9ef');$('.wcfm-message').html('').removeClass('wcfm-error').removeClass('wcfm-success').slideUp();});$("#product_subcats").select2().on("change",function(e){$('#categories .select2-selection').css('border-color','#e7e9ef').removeClass('valreq');$('#title').css('border-color','#e7e9ef');$('.wcfm-message').html('').removeClass('wcfm-error').removeClass('wcfm-success').slideUp();});$('#wcfm_products_simple_draft_button').click(function(event){event.preventDefault();$is_valid=wcfm_products_manage_form_validate();var _this=$(this);if($is_valid){$('.loading_icon').show();_this.attr('disabled','disabled');$('#wcfm-content').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});var description='';if(tinyMCE.activeEditor)description=tinyMCE.activeEditor.getContent();var data={action:'wcfm_ajax_controller',controller:'wcfm-products-manage',wcfm_products_manage_form:$('#wcfm_products_manage_form').serialize(),description:description,status:'draft',removed_variations:removed_variations,removed_person_types:removed_person_types}
var formData=new FormData($('#wcfm_products_manage_form'));$.ajax({type:'POST',url:woocommerce_params.ajax_url+"?action=wcfm_ajax_controller&controller=wcfm-products-manage&description="+description+"&status=draft",data:formData,cache:false,contentType:false,processData:false,success:function(data){if(response){var response_json=$.parseJSON(response);$('.wcfm-message').html('').removeClass('wcfm-error').removeClass('wcfm-success').slideUp();if(response_json.status){$('#wcfm_products_manage_form .wcfm-message').html('<span class="wcicon-status-completed"></span>'+response_json.message).addClass('wcfm-success').slideDown("slow",function(){if(response_json.redirect)window.location=response_json.redirect;});}else{$('#wcfm_products_manage_form .wcfm-message').html('<span class="wcicon-status-cancelled"></span>'+response_json.message).addClass('wcfm-error').slideDown();}
if(response_json.id)$('#pro_id').val(response_json.id);$('#wcfm-content').unblock();$('.loading_icon').hide();_this.removeAttr('disabled','disabled');}},error:function(data){console.log("error");console.log(data);}});}});$('#wcfm_products_simple_submit_button').click(function(event){event.preventDefault();$is_valid1=wcfm_products_manage_form_validate_step1();if(!$is_valid1){return false;}
$is_valid2=wcfm_products_manage_form_validate_step2();if(!$is_valid2){return false;}
$is_valid3=wcfm_products_manage_form_validate_step3();if(!$is_valid3){return false;}
$is_valid4=wcfm_products_manage_form_validate_step4();if(!$is_valid4){return false;}
$is_valid5=wcfm_products_manage_form_validate_step5();if(!$is_valid5){return false;}
var _this=$(this);if($is_valid1&&$is_valid2&&$is_valid3&&$is_valid4&&$is_valid5){$('.loading_icon').show();_this.attr('disabled','disabled');$('#wcfm-content').block({message:null,overlayCSS:{background:'#fff',opacity:0.6}});var description='';if(tinyMCE.activeEditor)description=tinyMCE.activeEditor.getContent();var formdata={action:'wcfm_ajax_controller',controller:'wcfm-products-manage',wcfm_products_manage_form:$('#wcfm_products_manage_form').serialize(),description:description,status:'submit',removed_variations:removed_variations,removed_person_types:removed_person_types}
$.ajax({type:'POST',url:woocommerce_params.ajax_url,data:formdata,success:function(response){if(response){var response_json=$.parseJSON(response);$('.wcfm-message').html('').removeClass('wcfm-error').removeClass('wcfm-success').slideUp();if(response_json.status){$('#wcfm_products_manage_form .wcfm-message').html('<span class="wcicon-status-completed"></span>'+response_json.message).addClass('wcfm-success').slideDown("slow",function(){if(response_json.redirect)window.location=response_json.redirect;});}else{$('#wcfm_products_manage_form .wcfm-message').html('<span class="wcicon-status-cancelled"></span>'+response_json.message).addClass('wcfm-error').slideDown();}
if(response_json.id)$('#pro_id').val(response_json.id);$('#wcfm-content').unblock();$('.loading_icon').hide();_this.removeAttr('disabled','disabled');}},error:function(data){console.log("error");console.log(data);}});}});function jsUcfirst(string){return string.charAt(0).toUpperCase()+string.slice(1);}});;jQuery(document).ready(function($){$('#_wc_booking_duration_type').change(function(){if($(this).val()=='customer'){$('.duration_type_customer_ele').show();}else{$('.duration_type_customer_ele').hide();}}).change();$('#_wc_booking_user_can_cancel').change(function(){if($(this).is(':checked'))$('.can_cancel_ele').show();else $('.can_cancel_ele').hide();}).change();$('#_wc_booking_duration_unit').change(function(){$('._wc_booking_buffer_period_unit').html($(this).val()+'s ');}).change();});
;window.wp=window.wp||{},function(a,b){function c(){function c(){!w&&window.tinymce&&(w=window.tinymce,x=w.$,x(document).on("click",function(a){var b,c,d=x(a.target);d.hasClass("wp-switch-editor")&&(b=d.attr("data-wp-editor-id"),c=d.hasClass("switch-tmce")?"tmce":"html",e(b,c))}))}function d(a){var b=x(".mce-toolbar-grp",a.getContainer())[0],c=b&&b.clientHeight;return c&&c>10&&c<200?parseInt(c,10):30}function e(a,b){a=a||"content",b=b||"toggle";var c,e,f,g=w.get(a),h=x("#wp-"+a+"-wrap"),i=x("#"+a),j=i[0];if("toggle"===b&&(b=g&&!g.isHidden()?"html":"tmce"),"tmce"===b||"tinymce"===b){if(g&&!g.isHidden())return!1;"undefined"!=typeof window.QTags&&window.QTags.closeAllTags(a),c=parseInt(j.style.height,10)||0;var k=!1;k=g?g.getParam("wp_keep_scroll_position"):window.tinyMCEPreInit.mceInit[a]&&window.tinyMCEPreInit.mceInit[a].wp_keep_scroll_position,k&&l(i),g?(g.show(),!w.Env.iOS&&c&&(e=d(g),c=c-e+14,c>50&&c<5e3&&g.theme.resizeTo(null,c)),g.getParam("wp_keep_scroll_position")&&m(g)):w.init(window.tinyMCEPreInit.mceInit[a]),h.removeClass("html-active").addClass("tmce-active"),i.attr("aria-hidden",!0),window.setUserSetting("editor","tinymce")}else if("html"===b){if(g&&g.isHidden())return!1;if(g){w.Env.iOS||(f=g.iframeElement,c=f?parseInt(f.style.height,10):0,c&&(e=d(g),c=c+e-14,c>50&&c<5e3&&(j.style.height=c+"px")));var n=null;g.getParam("wp_keep_scroll_position")&&(n=q(g)),g.hide(),n&&r(g,n)}else i.css({display:"",visibility:""});h.removeClass("tmce-active").addClass("html-active"),i.attr("aria-hidden",!1),window.setUserSetting("editor","html")}}function f(a,b){var c=a.lastIndexOf("<",b-1),d=a.lastIndexOf(">",b);if(c>d||">"===a.substr(b,1)){var e=a.substr(c),f=e.match(/<\s*(\/)?(\w+)/);if(!f)return null;var g=f[2],h=e.indexOf(">");return{ltPos:c,gtPos:c+h+1,tagType:g,isClosingTag:!!f[1]}}return null}function g(a,b){for(var c=i(a),d=0;d<c.length;d++){var e=c[d];if(b>=e.startIndex&&b<=e.endIndex)return e}}function h(a){var b=a.match(/\[+([\w_-])+/g),c=[];if(b)for(var d=0;d<b.length;d++){var e=b[d].replace(/^\[+/g,"");c.indexOf(e)===-1&&c.push(e)}return c}function i(a){var c,d=h(a);if(0===d.length)return[];for(var e,f=b.shortcode.regexp(d.join("|")),g=[];e=f.exec(a);){var i="["===e[1];c={shortcodeName:e[2],showAsPlainText:i,startIndex:e.index,endIndex:e.index+e[0].length,length:e[0].length},g.push(c)}for(var j=new RegExp('(^|[\\n\\r][\\n\\r]|<p>)(https?:\\/\\/[^s"]+?)(<\\/p>s*|[\\n\\r][\\n\\r]|$)',"gi");e=j.exec(a);)c={shortcodeName:"url",showAsPlainText:!1,startIndex:e.index,endIndex:e.index+e[0].length,length:e[0].length,urlAtStartOfContent:""===e[1],urlAtEndOfContent:""===e[3]},g.push(c);return g}function j(a,b){return a("<span>").css({display:"inline-block",width:0,overflow:"hidden","line-height":0}).html(b?b:"")}function k(a,b){var c=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],d=b.cursorStart,e=b.cursorEnd,h=f(a,d);h&&(d=c.indexOf(h.tagType)!==-1?h.ltPos:h.gtPos);var i=f(a,e);i&&(e=i.gtPos);var j=g(a,d);j&&!j.showAsPlainText&&(d=j.urlAtStartOfContent?j.endIndex:j.startIndex);var k=g(a,e);return k&&!k.showAsPlainText&&(e=k.urlAtEndOfContent?k.startIndex:k.endIndex),{cursorStart:d,cursorEnd:e}}function l(a){if(a&&a.length){var b=a[0],c=b.value,d=k(c,{cursorStart:b.selectionStart,cursorEnd:b.selectionEnd}),e=d.cursorStart,f=d.cursorEnd,g=e!==f?"range":"single",h=null,i=j(x,"&#65279;").attr("data-mce-type","bookmark");if("range"===g){var l=b.value.slice(e,f),m=i.clone().addClass("mce_SELRES_end");h=[l,m[0].outerHTML].join("")}b.value=[b.value.slice(0,e),i.clone().addClass("mce_SELRES_start")[0].outerHTML,h,b.value.slice(f)].join("")}}function m(a){var b=a.$(".mce_SELRES_start").attr("data-mce-bogus",1),c=a.$(".mce_SELRES_end").attr("data-mce-bogus",1);if(b.length)if(a.focus(),c.length){var d=a.getDoc().createRange();d.setStartAfter(b[0]),d.setEndBefore(c[0]),a.selection.setRng(d)}else a.selection.select(b[0]);a.getParam("wp_keep_scroll_position")&&o(a,b),n(b),n(c),a.save()}function n(a){var b=a.parent();a.remove(),!b.is("p")||b.children().length||b.text()||b.remove()}function o(b,c){var e,f=b.$(c).offset().top,g=b.$(b.getContentAreaContainer()).offset().top,h=d(b),i=a("#wp-content-editor-tools"),j=0,k=0;i.length&&(j=i.height(),k=i.offset().top);var l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,m=g+f,n=l-(j+h);if(!(m<n)){var o;b.settings.wp_autoresize_on?(e=a("html,body"),o=Math.max(m-n/2,k-j)):(e=a(b.contentDocument).find("html,body"),o=f),e.animate({scrollTop:parseInt(o,10)},100)}}function p(a){a.content=a.content.replace(/<p>(?:<br ?\/?>|\u00a0|\uFEFF| )*<\/p>/g,"<p>&nbsp;</p>")}function q(a){var b=a.getWin(),c=b.getSelection();if(c&&!(c.rangeCount<1)){var d="SELRES_"+Math.random(),e=j(a.$,d),f=e.clone().addClass("mce_SELRES_start"),g=e.clone().addClass("mce_SELRES_end"),h=c.getRangeAt(0),i=h.startContainer,k=h.startOffset,l=h.cloneRange();a.$(i).parents(".mce-offscreen-selection").length>0?(i=a.$("[data-mce-selected]")[0],f.attr("data-mce-object-selection","true"),g.attr("data-mce-object-selection","true"),a.$(i).before(f[0]),a.$(i).after(g[0])):(l.collapse(!1),l.insertNode(g[0]),l.setStart(i,k),l.collapse(!0),l.insertNode(f[0]),h.setStartAfter(f[0]),h.setEndBefore(g[0]),c.removeAllRanges(),c.addRange(h)),a.on("GetContent",p);var m=s(a.getContent());a.off("GetContent",p),f.remove(),g.remove();var n=new RegExp('<span[^>]*\\s*class="mce_SELRES_start"[^>]+>\\s*'+d+"[^<]*<\\/span>(\\s*)"),o=new RegExp('(\\s*)<span[^>]*\\s*class="mce_SELRES_end"[^>]+>\\s*'+d+"[^<]*<\\/span>"),q=m.match(n),r=m.match(o);if(!q)return null;var t=q.index,u=q[0].length,v=null;if(r){q[0].indexOf("data-mce-object-selection")!==-1&&(u-=q[1].length);var w=r.index;r[0].indexOf("data-mce-object-selection")!==-1&&(w-=r[1].length),v=w-u}return{start:t,end:v}}}function r(a,b){if(b){var c=a.getElement(),d=b.start,e=b.end||b.start;c.focus&&setTimeout(function(){c.setSelectionRange(d,e),c.blur&&c.blur(),c.focus()},100)}}function s(a){var b="blockquote|ul|ol|li|dl|dt|dd|table|thead|tbody|tfoot|tr|th|td|h[1-6]|fieldset|figure",c=b+"|div|p",d=b+"|pre",e=!1,f=!1,g=[];return a?(a.indexOf("<script")===-1&&a.indexOf("<style")===-1||(a=a.replace(/<(script|style)[^>]*>[\s\S]*?<\/\1>/g,function(a){return g.push(a),"<wp-preserve>"})),a.indexOf("<pre")!==-1&&(e=!0,a=a.replace(/<pre[^>]*>[\s\S]+?<\/pre>/g,function(a){return a=a.replace(/<br ?\/?>(\r\n|\n)?/g,"<wp-line-break>"),a=a.replace(/<\/?p( [^>]*)?>(\r\n|\n)?/g,"<wp-line-break>"),a.replace(/\r?\n/g,"<wp-line-break>")})),a.indexOf("[caption")!==-1&&(f=!0,a=a.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(a){return a.replace(/<br([^>]*)>/g,"<wp-temp-br$1>").replace(/[\r\n\t]+/,"")})),a=a.replace(new RegExp("\\s*</("+c+")>\\s*","g"),"</$1>\n"),a=a.replace(new RegExp("\\s*<((?:"+c+")(?: [^>]*)?)>","g"),"\n<$1>"),a=a.replace(/(<p [^>]+>.*?)<\/p>/g,"$1</p#>"),a=a.replace(/<div( [^>]*)?>\s*<p>/gi,"<div$1>\n\n"),a=a.replace(/\s*<p>/gi,""),a=a.replace(/\s*<\/p>\s*/gi,"\n\n"),a=a.replace(/\n[\s\u00a0]+\n/g,"\n\n"),a=a.replace(/(\s*)<br ?\/?>\s*/gi,function(a,b){return b&&b.indexOf("\n")!==-1?"\n\n":"\n"}),a=a.replace(/\s*<div/g,"\n<div"),a=a.replace(/<\/div>\s*/g,"</div>\n"),a=a.replace(/\s*\[caption([^\[]+)\[\/caption\]\s*/gi,"\n\n[caption$1[/caption]\n\n"),a=a.replace(/caption\]\n\n+\[caption/g,"caption]\n\n[caption"),a=a.replace(new RegExp("\\s*<((?:"+d+")(?: [^>]*)?)\\s*>","g"),"\n<$1>"),a=a.replace(new RegExp("\\s*</("+d+")>\\s*","g"),"</$1>\n"),a=a.replace(/<((li|dt|dd)[^>]*)>/g," \t<$1>"),a.indexOf("<option")!==-1&&(a=a.replace(/\s*<option/g,"\n<option"),a=a.replace(/\s*<\/select>/g,"\n</select>")),a.indexOf("<hr")!==-1&&(a=a.replace(/\s*<hr( [^>]*)?>\s*/g,"\n\n<hr$1>\n\n")),a.indexOf("<object")!==-1&&(a=a.replace(/<object[\s\S]+?<\/object>/g,function(a){return a.replace(/[\r\n]+/g,"")})),a=a.replace(/<\/p#>/g,"</p>\n"),a=a.replace(/\s*(<p [^>]+>[\s\S]*?<\/p>)/g,"\n$1"),a=a.replace(/^\s+/,""),a=a.replace(/[\s\u00a0]+$/,""),e&&(a=a.replace(/<wp-line-break>/g,"\n")),f&&(a=a.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),g.length&&(a=a.replace(/<wp-preserve>/g,function(){return g.shift()})),a):""}function t(a){var b=!1,c=!1,d="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|legend|section|article|aside|hgroup|header|footer|nav|figure|figcaption|details|menu|summary";return a=a.replace(/\r\n|\r/g,"\n"),a.indexOf("<object")!==-1&&(a=a.replace(/<object[\s\S]+?<\/object>/g,function(a){return a.replace(/\n+/g,"")})),a=a.replace(/<[^<>]+>/g,function(a){return a.replace(/[\n\t ]+/g," ")}),a.indexOf("<pre")===-1&&a.indexOf("<script")===-1||(b=!0,a=a.replace(/<(pre|script)[^>]*>[\s\S]*?<\/\1>/g,function(a){return a.replace(/\n/g,"<wp-line-break>")})),a.indexOf("<figcaption")!==-1&&(a=a.replace(/\s*(<figcaption[^>]*>)/g,"$1"),a=a.replace(/<\/figcaption>\s*/g,"</figcaption>")),a.indexOf("[caption")!==-1&&(c=!0,a=a.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(a){return a=a.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),a=a.replace(/<[^<>]+>/g,function(a){return a.replace(/[\n\t ]+/," ")}),a.replace(/\s*\n\s*/g,"<wp-temp-br />")})),a+="\n\n",a=a.replace(/<br \/>\s*<br \/>/gi,"\n\n"),a=a.replace(new RegExp("(<(?:"+d+")(?: [^>]*)?>)","gi"),"\n\n$1"),a=a.replace(new RegExp("(</(?:"+d+")>)","gi"),"$1\n\n"),a=a.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),a=a.replace(/\s*<option/gi,"<option"),a=a.replace(/<\/option>\s*/gi,"</option>"),a=a.replace(/\n\s*\n+/g,"\n\n"),a=a.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),a=a.replace(/<p>\s*?<\/p>/gi,""),a=a.replace(new RegExp("<p>\\s*(</?(?:"+d+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/<p>(<li.+?)<\/p>/gi,"$1"),a=a.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),a=a.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),a=a.replace(new RegExp("<p>\\s*(</?(?:"+d+")(?: [^>]*)?>)","gi"),"$1"),a=a.replace(new RegExp("(</?(?:"+d+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),a=a.replace(/(<br[^>]*>)\s*\n/gi,"$1"),a=a.replace(/\s*\n/g,"<br />\n"),a=a.replace(new RegExp("(</?(?:"+d+")[^>]*>)\\s*<br />","gi"),"$1"),a=a.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),a=a.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),a=a.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(a,b,c){return c.match(/<p( [^>]*)?>/)?a:b+"<p>"+c+"</p>"}),b&&(a=a.replace(/<wp-line-break>/g,"\n")),c&&(a=a.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),a}function u(b){var c={o:y,data:b,unfiltered:b};return a&&a("body").trigger("beforePreWpautop",[c]),c.data=s(c.data),a&&a("body").trigger("afterPreWpautop",[c]),c.data}function v(b){var c={o:y,data:b,unfiltered:b};return a&&a("body").trigger("beforeWpautop",[c]),c.data=t(c.data),a&&a("body").trigger("afterWpautop",[c]),c.data}var w,x,y={};return a(document).on("tinymce-editor-init.keep-scroll-position",function(a,b){b.$(".mce_SELRES_start").length&&m(b)}),a?a(document).ready(c):document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):window.attachEvent&&(window.attachEvent("onload",c),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&c()})),b.editor.autop=v,b.editor.removep=u,y={go:e,wpautop:v,pre_wpautop:u,_wp_Autop:t,_wp_Nop:s}}b.editor=b.editor||{},window.switchEditors=new c,b.editor.initialize=function(c,d){var e,f;if(a&&c&&b.editor.getDefaultSettings){if(f=b.editor.getDefaultSettings(),d||(d={tinymce:!0}),d.tinymce&&d.quicktags){var g=a("#"+c),h=a("<div>").attr({"class":"wp-core-ui wp-editor-wrap tmce-active",id:"wp-"+c+"-wrap"}),i=a('<div class="wp-editor-container">'),j=a("<button>").attr({type:"button","data-wp-editor-id":c}),k=a('<div class="wp-editor-tools">');if(d.mediaButtons){var l="Add Media";window._wpMediaViewsL10n&&window._wpMediaViewsL10n.addMedia&&(l=window._wpMediaViewsL10n.addMedia);var m=a('<button type="button" class="button insert-media add_media">');m.append('<span class="wp-media-buttons-icon"></span>'),m.append(document.createTextNode(" "+l)),m.data("editor",c),k.append(a('<div class="wp-media-buttons">').append(m))}h.append(k.append(a('<div class="wp-editor-tabs">').append(j.clone().attr({id:c+"-tmce","class":"wp-switch-editor switch-tmce"}).text(window.tinymce.translate("Visual"))).append(j.attr({id:c+"-html","class":"wp-switch-editor switch-html"}).text(window.tinymce.translate("Text")))).append(i)),g.after(h),i.append(g)}window.tinymce&&d.tinymce&&("object"!=typeof d.tinymce&&(d.tinymce={}),e=a.extend({},f.tinymce,d.tinymce),e.selector="#"+c,a(document).trigger("wp-before-tinymce-init",e),window.tinymce.init(e),window.wpActiveEditor||(window.wpActiveEditor=c)),window.quicktags&&d.quicktags&&("object"!=typeof d.quicktags&&(d.quicktags={}),e=a.extend({},f.quicktags,d.quicktags),e.id=c,a(document).trigger("wp-before-quicktags-init",e),window.quicktags(e),window.wpActiveEditor||(window.wpActiveEditor=e.id))}},b.editor.remove=function(b){var c,d,e=a("#wp-"+b+"-wrap");window.tinymce&&(c=window.tinymce.get(b),c&&(c.isHidden()||c.save(),c.remove())),window.quicktags&&(d=window.QTags.getInstance(b),d&&d.remove()),e.length&&(e.after(a("#"+b)),e.remove())},b.editor.getContent=function(b){var c;if(a&&b)return window.tinymce&&(c=window.tinymce.get(b),c&&!c.isHidden()&&c.save()),a("#"+b).val()}}(window.jQuery,window.wp);